<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                            http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.6.xsd">

    <changeSet id="create-db-roles" author="Eugene">
        <sql splitStatements="false" stripComments="true">
            DO $$
            BEGIN
            IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'app_admin') THEN
            CREATE ROLE app_admin LOGIN PASSWORD 'secret';
            END IF;

            IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'db_admin') THEN
            CREATE ROLE db_admin LOGIN PASSWORD 'db_admin_password';
            END IF;

            IF NOT EXISTS (SELECT FROM pg_roles WHERE rolname = 'app_user') THEN
            CREATE ROLE app_user LOGIN PASSWORD 'app_user_password';
            END IF;
            END
        $$;
        </sql>
    </changeSet>
</databaseChangeLog>